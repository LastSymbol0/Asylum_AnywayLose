{"version":3,"sources":["asylum-sdk/asylum.ts","Game/items/Utils.js","Game/items/Blackhole.js","Game/items/Enemy.js","Game/items/Food.js","Game/items/Player.js","asylum-sdk/players.ts","Game/Game.tsx","App.tsx","index.tsx"],"names":["findAchievementsAccountAddress","programId","PublicKey","findProgramAddress","Buffer","from","findGamesCatalogAccountAddress","initAsylumAccounts","program","a","Promise","all","initAchievementsAccount","initGamesCatalogAccount","userPublicKey","provider","wallet","publicKey","account","nonce","rpc","initializeAchievements","accounts","achievementsAccount","user","systemProgram","web3","SystemProgram","addAchievement","label","description","game","initializeGamesCatalog","gamesCatalogAccount","addGameToCatalog","getMarginTop","elem","cs","window","getComputedStyle","parseInt","marginTop","getMarginLeft","marginLeft","getRandomInt","min","max","Math","floor","random","createBlackhole","onPlayerCollision","root","document","getElementById","Blackhole","createElement","style","position","id","width","src","appendChild","setInterval","left","removeChild","playerShip","runBlackhole","enemiesCount","createEnemy","onBorderCollision","enemy","alt","start","Date","now","timer","timePassed","clearInterval","goEnemy","createFood","eat","goFood","bulletsCount","shoot","onBulletEnemyCollision","fire","enemy1","enemy2","enemy3","checkClash","screen","findPlayerGlobalAccountAddress","toBuffer","findPlayerGameAccountAddress","gameId","initPlayer","nickname","avatar","default","playerAccount","initialize","updatePlayerNickname","updateNickname","updatePlayerAvatar","updateAvatar","addGameToLibrary","gameAddress","addGame","removeGameFromLibrary","removeGame","achievementId","expToAdd","addExp","exp","shipPictures","playersProgramID","playersIdl","metadata","address","asylumProgramID","asylumIdl","Game","useState","score","setScore","level","setLevel","lives","setLives","pxToMove","setPxToMove","bullet","setBullet","setNickname","playerAchievements","setPlayerAchievements","achievements","setAchievements","isPlayerDataFetched","setIsPlayerDataFetched","isGlobalDataFetched","setIsGlobalDataFetched","useAnchorWallet","getProvider","connection","Connection","Provider","defaultOptions","console","log","Program","players","playerAccountAddress","fetch","toString","asylum","achievementsAccountAddress","gameAchievements","filter","x","map","type","achievement","find","indexOf","error","useEffect","fetchGlobalData","fetchPlayerData","onEnemyBorderCollision","alert","location","reload","onPlayerBlackholeCollision","newLives","onPlayerFoodCollision","newLevel","length","paddingTop","borderBottom","color","textAlign","i","item","display","onClick","shipPicture","player","cursor","createPlayer","header","inter","startGlobalTimer","alignContent","repeat","handleKeys","handleEventType","onKeyEvent","key","e","top","documentElement","clientWidth","clientHeight","innerHTML","createBullet","wallets","getPhantomWallet","App","useWallet","connected","className","justifyContent","AppWithProvider","endpoint","autoConnect","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.02287812.chunk.js","sourcesContent":["import { PublicKey, SystemProgram } from '@solana/web3.js';\r\nimport { Program, web3 } from '@project-serum/anchor';\r\n\r\nexport type AchievementData = {\r\n    id: number,\r\n    label: string,\r\n    description: string,\r\n    game: PublicKey,\r\n}\r\n\r\nexport const findAchievementsAccountAddress = (programId: PublicKey): Promise<[PublicKey, number]> => {\r\n    return PublicKey.findProgramAddress([Buffer.from(\"Achievements\")], programId);\r\n}\r\n\r\nexport const findGamesCatalogAccountAddress = (programId: PublicKey): Promise<[PublicKey, number]> => {\r\n    return PublicKey.findProgramAddress([Buffer.from(\"GamesCatalog\")], programId);\r\n}\r\n\r\n\r\nexport const initAsylumAccounts = async (program: Program): Promise<void> => {\r\n    await Promise.all([initAchievementsAccount(program), initGamesCatalogAccount(program)])\r\n}\r\n\r\nexport const initAchievementsAccount = async (program: Program): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [account, nonce] = await findAchievementsAccountAddress(programId);\r\n\r\n    await program.rpc.initializeAchievements(nonce, {\r\n      accounts: {\r\n        achievementsAccount: account,\r\n        user: userPublicKey,\r\n        systemProgram: web3.SystemProgram.programId,\r\n      }\r\n    });\r\n}\r\n\r\nexport const addAchievement = async (program: Program, label: String, description: String, game: PublicKey): Promise<void> => {\r\n    const programId = program.programId;\r\n    const [account, _] = await findAchievementsAccountAddress(programId);\r\n\r\n    await program.rpc.addAchievement(label, description, game, {\r\n      accounts: {\r\n        achievementsAccount: account,\r\n      }\r\n    });\r\n}\r\n\r\nexport const initGamesCatalogAccount = async (program: Program): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [account, nonce] = await findGamesCatalogAccountAddress(programId);\r\n\r\n    await program.rpc.initializeGamesCatalog(nonce, {\r\n      accounts: {\r\n        gamesCatalogAccount: account,\r\n        user: userPublicKey,\r\n        systemProgram: web3.SystemProgram.programId,\r\n      }\r\n    });\r\n}\r\n\r\nexport const addGameToCatalog = async (program: Program, game: PublicKey): Promise<void> => {\r\n    const programId = program.programId;\r\n    const [account, _] = await findAchievementsAccountAddress(programId);\r\n\r\n    await program.rpc.addGameToCatalog(game, {\r\n      accounts: {\r\n        gamesCatalogAccount: account,\r\n      }\r\n    });\r\n}\r\n\r\n","export function getMarginTop (elem) {\r\n    if (elem) {\r\n        var cs = window.getComputedStyle(elem);\r\n    var top = parseInt(cs.marginTop);\r\n    // delete elem;\r\n    return (top);\r\n    };\r\n    // delete elem;\r\n    return (9999);\r\n}\r\nexport function getMarginLeft (elem) {\r\n    if (elem) {\r\n        var cs = window.getComputedStyle(elem);\r\n    var left = parseInt(cs.marginLeft);\r\n    // delete elem;\r\n    return (left);\r\n    };\r\n    // delete elem;\r\n    return(9999);\r\n}\r\nexport function getRandomInt(min, max){\r\n      return (Math.floor(Math.random() * (max - min + 1)) + min);\r\n}","import {getMarginLeft, getMarginTop, getRandomInt} from './Utils'\r\n\r\nexport function runBlackhole (Blackhole, onPlayerCollision) {\r\n    setInterval(function () {\r\n\r\n        var left = getMarginLeft(Blackhole);\r\n        Blackhole.style.marginLeft = left - 3 + 'px';\r\n\r\n        if (left <= -100) {\r\n            var root = document.getElementById('root')\r\n            root.removeChild(Blackhole);\r\n            // delete Blackhole;\r\n        }\r\n\r\n        var playerShip = document.getElementById(\"playerShip\");\r\n\r\n        if (left <= getMarginLeft(playerShip) + 100 &&\r\n            left >= getMarginLeft(playerShip)) {\r\n            if (getMarginTop(Blackhole) >= getMarginTop(playerShip) - 30 &&\r\n                getMarginTop(Blackhole) <= getMarginTop(playerShip) + 80) {\r\n                \r\n                onPlayerCollision()\r\n\r\n                var root = document.getElementById('root')\r\n                root.removeChild(Blackhole);\r\n\r\n                // delete Blackhole;\r\n            };\r\n        };\r\n    }, 20)\r\n}\r\n\r\nexport const createBlackhole = (onPlayerCollision) => {\r\n    var root = document.getElementById('root')\r\n    var Blackhole = document.createElement(\"img\");\r\n    Blackhole.style.position = 'absolute';\r\n    Blackhole.style.id = 'Blackhole';\r\n    Blackhole.style.width = '100px';\r\n    Blackhole.style.marginLeft = '100%';\r\n    Blackhole.style.marginTop = getRandomInt(0, 500) + 'px';\r\n    Blackhole.src='./pic/blackhole.svg';\r\n    root.appendChild(Blackhole);\r\n    runBlackhole(Blackhole, onPlayerCollision);\r\n    \r\n    return Blackhole\r\n}\r\n","import {getMarginLeft, getMarginTop, getRandomInt} from './Utils'\r\n\r\nexport var enemiesCount = '1';\r\n\r\nexport function goEnemy (enemy, onBorderCollision) {\r\n    var start = Date.now();\r\n\r\n    var cs = window.getComputedStyle(enemy);\r\n    var left = parseInt(cs.marginLeft);\r\n\r\n    var timer = setInterval(function () {\r\n        var timePassed = Date.now() - start;\r\n        enemy.style.marginLeft = left - timePassed/3 + 'px';\r\n        if (parseInt(cs.marginLeft) <= -200) {\r\n\r\n            onBorderCollision();\r\n\r\n            clearInterval(timer);\r\n            var root = document.getElementById('root')\r\n            root.removeChild(enemy);\r\n            // delete enemy;\r\n        };\r\n    }, 20)\r\n}\r\n\r\nexport function createEnemy(onBorderCollision) {\r\n    var root = document.getElementById('root')\r\n    var enemy = document.createElement(\"img\");\r\n    enemy.id =  \"enemy\" + enemiesCount;\r\n    enemy.style.position = 'absolute';\r\n    enemy.style.width = '200px';\r\n    enemy.style.marginLeft = '100%';\r\n    enemy.style.marginTop = getRandomInt(0, 500) + 'px';\r\n    enemy.src='./pic/enemy.png';\r\n    enemy.alt='enemy';\r\n    enemiesCount++;\r\n    root.appendChild(enemy);\r\n    goEnemy(enemy, onBorderCollision);\r\n    // delete enemy;\r\n}","import {getMarginLeft, getMarginTop, getRandomInt} from './Utils'\r\n\r\nexport function goFood (eat, onPlayerCollision) {\r\n    var interval = setInterval(function () {\r\n        var left = getMarginLeft(eat);\r\n        eat.style.marginLeft = left - 1 + 'px';\r\n        if (left <= 0) {\r\n            var root = document.getElementById('root')\r\n            root.removeChild(eat);\r\n            // delete eat;\r\n        }\r\n\r\n        var playerShip = document.getElementById(\"playerShip\");\r\n        if (left <= getMarginLeft(playerShip) + 100 &&\r\n            left >= getMarginLeft(playerShip)) {\r\n            if (getMarginTop(eat) >= getMarginTop(playerShip) + 30 &&\r\n                getMarginTop(eat) <= getMarginTop(playerShip) + 170) {\r\n\r\n                onPlayerCollision()\r\n                var root = document.getElementById('root')\r\n                root.removeChild(eat);\r\n                // delete eat;\r\n            };\r\n        };\r\n    }, 20)\r\n}\r\n\r\nexport function createFood (onPlayerCollision) {\r\n    var root = document.getElementById('root')\r\n    var eat = document.createElement(\"img\");\r\n    eat.style.position = 'absolute';\r\n    eat.style.id = 'eat';\r\n    eat.style.width = '100px'\r\n    eat.style.marginLeft = '100%';\r\n    eat.style.marginTop = getRandomInt(0, 500) + 'px';\r\n    eat.src='./pic/eat2.svg';\r\n    root.appendChild(eat);\r\n    goFood(eat, onPlayerCollision);\r\n}","import { enemiesCount } from \"./Enemy\";\r\nimport {getMarginLeft, getMarginTop, getRandomInt} from './Utils'\r\n\r\nvar bulletsCount = '1';\r\n\r\nfunction checkClash (fire, enemy) {\r\n    var enemy1 = document.getElementById(\"enemy\" + (enemiesCount - 1));\r\n    var enemy2 = document.getElementById(\"enemy\" + (enemiesCount - 2));\r\n    var enemy3 = document.getElementById(\"enemy\" + (enemiesCount - 3));\r\n    var root = document.getElementById('root')\r\n    if ((getMarginLeft(fire) >= getMarginLeft(enemy1)) &&\r\n            (getMarginTop(fire) >= getMarginTop(enemy1) + 30 &&\r\n            getMarginTop(fire) <= getMarginTop(enemy1) + 170)) {\r\n            root.removeChild(enemy1);\r\n            // delete enemy1;\r\n        return (true);\r\n    };\r\n    if ((getMarginLeft(fire) >= getMarginLeft(enemy2)) &&\r\n            (getMarginTop(fire) >= getMarginTop(enemy2) + 30 &&\r\n            getMarginTop(fire) <= getMarginTop(enemy2) + 170)) {\r\n            root.removeChild(enemy2);\r\n            // delete enemy2;\r\n        return (true);\r\n    };\r\n    if ((getMarginLeft(fire) >= getMarginLeft(enemy3)) &&\r\n            (getMarginTop(fire) >= getMarginTop(enemy3) + 30 &&\r\n            getMarginTop(fire) <= getMarginTop(enemy3) + 170)) {\r\n            root.removeChild(enemy3);\r\n            // delete enemy3;\r\n        return (true);\r\n    };\r\n}\r\n\r\n\r\nexport function shoot (onBulletEnemyCollision) {\r\n    var playerShip = document.getElementById(\"playerShip\");\r\n    var fire = document.getElementById(\"fire\" + (bulletsCount - 1));\r\n\r\n    var left = getMarginLeft(playerShip) + 150;\r\n\r\n    var start = Date.now();\r\n\r\n    var timer = setInterval(function () {\r\n\r\n        var timePassed = Date.now() - start;\r\n        var root = document.getElementById('root')\r\n\r\n        if (checkClash(fire)) {\r\n\r\n            onBulletEnemyCollision()\r\n\r\n            clearInterval(timer);\r\n            root.removeChild(fire);\r\n        }\r\n        // eslint-disable-next-line no-restricted-globals\r\n        if (left + timePassed / 3 >  1.5 * screen.width) {\r\n            clearInterval(timer);\r\n            root.removeChild(fire);\r\n        }\r\n        fire.style.marginLeft = left + timePassed / 3 + 'px';\r\n    }, 20)\r\n}\r\n\r\nexport function createBullet(bullet) {\r\n    var root = document.getElementById('root')\r\n    var fire = document.createElement('div');\r\n    var playerShip = document.getElementById('playerShip')\r\n    fire.id = \"fire\" + bulletsCount;\r\n    bulletsCount++;\r\n    fire.style.position = \"absolute\";\r\n    fire.style.marginLeft = getMarginLeft(playerShip) + 150 + \"px\";\r\n    fire.style.marginTop = getMarginTop(playerShip) + 90 + 'px';\r\n    fire.style.color = \"#a7ff23\";  \r\n    fire.innerHTML = bullet;\r\n\r\n    \r\n    root.appendChild(fire);\r\n}\r\n\r\n\r\n\r\nexport function createPlayer(shipPicture) {\r\n    var root = document.getElementById('root')\r\n\r\n    var player = document.createElement(\"img\");\r\n    player.id =  \"playerShip\";\r\n    player.style.width = '200px';\r\n    player.style.position = \"absolute\";\r\n    player.style.cursor = \"pointer\";\r\n    player.src=shipPicture;\r\n    player.alt='player';\r\n\r\n    root.appendChild(player);\r\n}","import { PublicKey } from '@solana/web3.js';\r\nimport { Program, web3 } from '@project-serum/anchor';\r\n\r\n\r\nexport const findPlayerGlobalAccountAddress = (userPublicKey: PublicKey, programId: PublicKey): Promise<[PublicKey, number]> => {\r\n    return PublicKey.findProgramAddress([userPublicKey.toBuffer()], programId);\r\n}\r\n\r\nexport const findPlayerGameAccountAddress = (userPublicKey: PublicKey, gameId: PublicKey, programId: PublicKey): Promise<[PublicKey, number]> => {\r\n    return PublicKey.findProgramAddress([userPublicKey.toBuffer(), gameId.toBuffer()], programId);\r\n}\r\n\r\nexport const initPlayer = async (program: Program, nickname: string = \"CryptoBuddy77\", avatar: PublicKey = PublicKey.default): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [playerAccount, nonce] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n    await program.rpc.initialize(nonce, nickname, avatar, {\r\n      accounts: {\r\n        playerAccount: playerAccount,\r\n        user: userPublicKey,\r\n        systemProgram: web3.SystemProgram.programId,\r\n      }\r\n    });\r\n}\r\n\r\nexport const updatePlayerNickname = async (program: Program, nickname: string): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n    await program.rpc.updateNickname(nickname, {\r\n      accounts: {\r\n        playerAccount: playerAccount,\r\n      }\r\n    });\r\n}\r\n\r\nexport const updatePlayerAvatar = async (program: Program, avatar: PublicKey): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n    await program.rpc.updateAvatar(avatar, {\r\n      accounts: {\r\n        playerAccount: playerAccount,\r\n      }\r\n    });\r\n}\r\n\r\nexport const addGameToLibrary = async (program: Program, gameAddress: PublicKey): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n    await program.rpc.addGame(gameAddress, {\r\n      accounts: {\r\n        playerAccount: playerAccount,\r\n      }\r\n    });\r\n}\r\n\r\nexport const removeGameFromLibrary = async (program: Program, gameAddress: PublicKey): Promise<void> => {\r\n    const userPublicKey = program.provider.wallet.publicKey;\r\n    const programId = program.programId;\r\n    const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n    await program.rpc.removeGame(gameAddress, {\r\n      accounts: {\r\n        playerAccount: playerAccount,\r\n      }\r\n    });\r\n}\r\n\r\nexport const addAchievement = async (program: Program, achievementId: number, expToAdd: number = 0): Promise<void> => {\r\n  const userPublicKey = program.provider.wallet.publicKey;\r\n  const programId = program.programId;\r\n  const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n  await program.rpc.addAchievement(achievementId, expToAdd, {\r\n    accounts: {\r\n      playerAccount: playerAccount,\r\n    }\r\n  });\r\n}\r\n\r\nexport const addExp = async (program: Program, exp: number): Promise<void> => {\r\n  const userPublicKey = program.provider.wallet.publicKey;\r\n  const programId = program.programId;\r\n  const [playerAccount, _] = await findPlayerGlobalAccountAddress(userPublicKey, programId);\r\n\r\n  await program.rpc.addExp(exp, {\r\n    accounts: {\r\n      playerAccount: playerAccount,\r\n    }\r\n  });\r\n}","/* eslint-disable no-restricted-globals */\r\nimport { useEffect, useState } from 'react'\r\nimport { createBlackhole } from './items/Blackhole'\r\nimport { createEnemy } from './items/Enemy'\r\nimport { createFood } from './items/Food'\r\nimport { createPlayer, shoot, createBullet } from './items/Player'\r\nimport {getMarginLeft, getMarginTop, getRandomInt} from './items/Utils'\r\nimport KeyboardEventHandler from 'react-keyboard-event-handler'\r\n\r\nimport playersIdl from '../asylum-sdk/idl/players.json'\r\nimport asylumIdl from '../asylum-sdk/idl/asylum.json'\r\nimport { players, asylum } from '../asylum-sdk'\r\n\r\nimport { useAnchorWallet } from '@solana/wallet-adapter-react'\r\nimport { Connection, PublicKey } from '@solana/web3.js'\r\nimport { Idl, Program, Provider } from '@project-serum/anchor'\r\nimport { Achievement, AchievementData, AchievementsList } from './AchievementsList'\r\n\r\nconst shipPictures = [\"./pic/unit.svg\",\"./pic/unit2.svg\",\"./pic/unit3.svg\",\"./pic/unit4.svg\"];\r\n\r\nconst playersProgramID = new PublicKey(playersIdl.metadata.address)\r\nconst asylumProgramID = new PublicKey(asylumIdl.metadata.address)\r\nconst gameId = new PublicKey(\"11111111111111111111111111111112\")\r\n\r\nconst killEnemyScoreBonus = 50;\r\n\r\nexport const Game = () => {\r\n    \r\n    var [score, setScore] = useState(0);\r\n    var [level, setLevel] = useState(1);\r\n    var [lives, setLives] = useState(5);\r\n    var [pxToMove, setPxToMove] = useState(21);\r\n    var [bullet, setBullet] = useState(\"~~>\");\r\n\r\n    const [nickname, setNickname] = useState('')\r\n    const [playerAchievements, setPlayerAchievements] = useState([] as number[])\r\n    const [achievements, setAchievements] = useState([] as AchievementData[])\r\n    const [isPlayerDataFetched, setIsPlayerDataFetched] = useState(false)\r\n    const [isGlobalDataFetched, setIsGlobalDataFetched] = useState(false)\r\n\r\n    const wallet = useAnchorWallet()\r\n\r\n    async function getProvider() {\r\n        if (!wallet)\r\n            return;\r\n\r\n        const network = \"https://api.devnet.solana.com\";\r\n        const connection = new Connection(network, \"processed\")\r\n        \r\n        const provider = new Provider(\r\n          connection, wallet, Provider.defaultOptions(),\r\n        )\r\n        return provider;\r\n    }\r\n\r\n    async function fetchPlayerData() {\r\n        console.log(\"fetch; wallet:\", wallet)\r\n        if (!wallet)\r\n            return;\r\n\r\n        const provider = await getProvider()\r\n        const program = new Program(playersIdl as Idl, playersProgramID, provider)\r\n    \r\n        try {\r\n          const [playerAccountAddress, _] = await players.findPlayerGlobalAccountAddress(wallet.publicKey, playersProgramID)\r\n          const account = await program.account.playerAccount.fetch(playerAccountAddress)\r\n    \r\n          console.log(account)\r\n          setNickname(account.nickname.toString())\r\n          setPlayerAchievements(account.achievements)\r\n          setIsPlayerDataFetched(true)\r\n        } catch (err) {\r\n          console.log(\"Player data fetching error: \", err)\r\n        }\r\n    }\r\n\r\n    async function fetchGlobalData() {\r\n        const provider = await getProvider()\r\n        const program = new Program(asylumIdl as Idl, asylumProgramID, provider)\r\n    \r\n        try {\r\n            const [achievementsAccountAddress, _] = await asylum.findAchievementsAccountAddress(asylumProgramID)\r\n            const account = await program.account.achievementsAccount.fetch(achievementsAccountAddress)\r\n            \r\n            console.log(account)\r\n\r\n            const gameAchievements = account.achievements\r\n              .filter((x: asylum.AchievementData) => x.game.toString() === gameId.toString())\r\n              .map((x: asylum.AchievementData) => { return {type: x.label, id: x.id, label: x.label, description: x.description}});\r\n            \r\n            console.log(\"gameAchievements\", gameAchievements)\r\n            setAchievements(gameAchievements)\r\n            setIsGlobalDataFetched(true)\r\n        } catch (err) {\r\n            console.log(\"Achievements data fetching error: \", err)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!isGlobalDataFetched)\r\n            fetchGlobalData();\r\n        if (!isPlayerDataFetched)\r\n            fetchPlayerData();\r\n    }, [isPlayerDataFetched, isGlobalDataFetched])\r\n\r\n    async function addAchievement(achievement: Achievement) {\r\n        const provider = await getProvider()\r\n        const program = new Program(playersIdl as Idl, playersProgramID, provider)\r\n    \r\n        try {\r\n            const achievementId = achievements.find(x => x.type === achievement)?.id;\r\n\r\n            if (achievementId)\r\n            {\r\n                // if player does not already has the achievement\r\n                if (playerAchievements.indexOf(achievementId) === -1)\r\n                {\r\n                    await players.addAchievement(program, achievementId, 0)\r\n                    setIsPlayerDataFetched(false);\r\n                }\r\n            }\r\n            else\r\n                console.error(\"Could not find the achievement by type\");\r\n        } catch (err) {\r\n            console.log(\"Transaction error: \", err)\r\n        }\r\n    }\r\n\r\n    const onEnemyBorderCollision = () => {\r\n        setLives(lives => lives - 1);\r\n\r\n        // TODO: rewrite\r\n        if (lives <= 0) {\r\n            alert(\"Looooooser!\");\r\n            location.reload();\r\n        };\r\n    }\r\n\r\n    const onBulletEnemyCollision = () => {\r\n        addAchievement('First kill')\r\n        setScore(score => score + killEnemyScoreBonus);\r\n    }\r\n    \r\n    const onPlayerBlackholeCollision = () => {\r\n        setLives(lives =>\r\n            {\r\n                const newLives = lives - 5;\r\n                if (lives <= 0) {\r\n                    addAchievement('Interstellar')\r\n\r\n                    alert(\"Oh, f*cking black hole. You lose. Try again.\");\r\n                    alert(\"BTW, if you wanna know what`s happens when you fall in black hole, you can follow the link 'https://teletype.in/@nakedspace/HJrT6uhs7'\");\r\n                    location.reload();\r\n                }\r\n                return newLives;\r\n            });\r\n    }\r\n    \r\n    const onPlayerFoodCollision = () => {\r\n        setLives(lives => lives + 1);\r\n    }\r\n\r\n    const startGlobalTimer = () => {\r\n        var header = document.getElementById(\"header\") as HTMLElement;\r\n        if (header)\r\n        {\r\n            var inter = setInterval(function () {\r\n                header.style.marginTop = getMarginTop(header) - 1 + 'px';\r\n                if (getMarginTop(header) <= -230) {\r\n                    clearInterval(inter);\r\n                };\r\n            }, 20)\r\n        }\r\n        setInterval(function () {\r\n            createEnemy(onEnemyBorderCollision)\r\n        }, 2000)\r\n        setInterval(function () {\r\n            createBlackhole(onPlayerBlackholeCollision)\r\n        }, 8000)\r\n        setInterval(function () {\r\n            createFood(onPlayerFoodCollision);\r\n        }, 11000)\r\n    }\r\n\r\n    const onClickStart = () => {\r\n        createPlayer(shipPictures[0])\r\n        startGlobalTimer()\r\n    }\r\n\r\n    const onClickBoost = () => {\r\n        setPxToMove(pxToMove => pxToMove + 2);\r\n    }\r\n\r\n    const onClickHiddenButton = () => {\r\n        alert(\"Nu zdravstvuy stalker. You are still loser.\");\r\n        location.reload();\r\n    }\r\n\r\n    function actionHandler(key: string, e: KeyboardEvent) {\r\n        var playerShip = document.getElementById(\"playerShip\");\r\n\r\n        if (!playerShip)\r\n            return\r\n\r\n        var cs = window.getComputedStyle(playerShip);\r\n        var left = parseInt(cs.marginLeft);\r\n        var top = parseInt(cs.marginTop);\r\n\r\n        switch(key){\r\n            case \"left\":\r\n                if(left>0)\r\n                    playerShip.style.marginLeft = left - pxToMove + \"px\";\r\n                break;\r\n            case \"up\":\r\n                if(top>0)\r\n                    playerShip.style.marginTop = top - pxToMove + \"px\";\r\n                break;\r\n            case \"right\":\r\n                if(left < document.documentElement.clientWidth - 220)\r\n                    playerShip.style.marginLeft = left + pxToMove + \"px\";\r\n                break;\r\n            case \"down\":\r\n                if(top < document.documentElement.clientHeight - 100)\r\n                    playerShip.style.marginTop = top + pxToMove + \"px\";\r\n                break;\r\n            case \"space\":\r\n                createBullet(bullet);\r\n                shoot(onBulletEnemyCollision);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    if (lives <= 0) {\r\n        alert(\"One more time, loser?\");\r\n        location.reload();\r\n    }\r\n\r\n    useEffect(() => {\r\n        const newLevel = Math.floor(score / 600)\r\n\r\n        console.log(\"score\", score)\r\n        \r\n        if (newLevel >= level) {\r\n            setLevel(level => level + 1)\r\n        }\r\n    }, [score, level])\r\n\r\n    useEffect(() => {\r\n        var playerShip = document.getElementById(\"playerShip\") as HTMLImageElement;\r\n\r\n        if (!playerShip)\r\n            return;\r\n\r\n\r\n        console.log(\"levl\", level);\r\n\r\n        playerShip.src = shipPictures[(level - 1) % shipPictures.length];\r\n\r\n\r\n        if (level === 3){\r\n            setBullet(\"~~> <br> ~~>\")\r\n        }\r\n        if (level === 4) {\r\n            addAchievement('Infinity war')\r\n\r\n            playerShip.style.paddingTop = \"37px\";\r\n            setBullet(\"~~> <br><br> ~~> <br><br> ~~>\")\r\n        }\r\n    }, [level, shipPictures, setBullet])\r\n\r\n\r\n    return (\r\n    <div>\r\n        <div  style={{borderBottom: \"solid #ffff00\"}}>\r\n            <h1 id=\"header\" style={{color: \"#018f83\", textAlign: \"center\"}}>Hey, {nickname}</h1>\r\n            <h1 id=\"header\" style={{color: \"#018f83\", textAlign: \"center\"}}>Wanna proof that you're not a loser?)</h1>\r\n\r\n            <div>\r\n                <div style={{width: \"600px\", color: \"#ffd700\", position: \"absolute\"}}>\r\n                    Achievements:\r\n                    {playerAchievements && playerAchievements.length !== 0 ?\r\n                      <ul>{playerAchievements.map((x, i) =>\r\n                      {\r\n                        const achievement = achievements.find(item => item.id === x);\r\n                        const display = achievement\r\n                          ? `'${achievement.label}' - ${achievement.description}`\r\n                          : `Something went wrong. Achievement id: ${x}`\r\n                        return <li key={i}>{display}</li>\r\n                      })}\r\n                      </ul>\r\n                      : <p>No achievements so far</p>}\r\n                </div>\r\n                <img id=\"start\" onClick={onClickStart} src=\"./pic/strart.png\" alt=\"start button\" style={{width: \"100px\", marginLeft: \"47%\"}}/>\r\n                &emsp;&emsp;&emsp;&emsp;\r\n                <img id=\"boost\" onClick={onClickBoost} src=\"./pic/running.png\" alt=\"boost\" style={{width: \"80px\", position: \"absolute\"}}/>\r\n                <span id=\"speed\" style={{color: \"orange\"}}>Current speed: {pxToMove}px</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div style={{alignContent: 'space-between'}}>\r\n            <h2 id=\"lives\" style={{display: \"inline\", color: \"red\"}}>Lives: {'• '.repeat(lives)}</h2>\r\n            &emsp;&emsp;&emsp;&emsp;\r\n            <h2 id=\"score\" style={{display: \"inline\", color: \"orange\"}}>Score: {score}&ensp;&ensp;</h2>\r\n            <h2 id=\"level\" style={{display: \"inline\", color: \"orange\"}}>Level: {level}</h2>\r\n\r\n            <img onClick={onClickHiddenButton} id=\"HiddenButtonForWin\" alt=\"\" src=\"./pic/HiddenButtonForWinImg.png\"/>\r\n        </div>\r\n\r\n        <KeyboardEventHandler handleKeys={[\"right\", \"left\", \"up\", \"down\", \"space\"]} handleEventType=\"keydown\" onKeyEvent={actionHandler}></KeyboardEventHandler>\r\n    </div>)\r\n}\r\n","import './App.css'\nimport { Game } from './Game/Game';\n\nimport { WalletProvider, ConnectionProvider, useWallet } from '@solana/wallet-adapter-react';\nimport { WalletModalProvider, WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport { getPhantomWallet } from '@solana/wallet-adapter-wallets';\n\nconst wallets = [getPhantomWallet()]\n\nfunction App() {\n    // alert(\"Hello %username%! You can move with '⇐' '⇑' '⇒' '⇓' keys, and fire on <space>. Default move speed is 8 pixels per one press. You can increase it by press button. To run the game click 'start'. Pineapples can be treacherous. Watch out the blackholes. Good luck!      WIN OR DIE!\")\n    const wallet = useWallet()\n\n    return (\n      !wallet.connected\n        ? <div style={{ display: 'flex', justifyContent: 'center', marginTop: '100px' }}>\n            <WalletMultiButton />\n          </div>\n        : <div className=\"App\">\n            <Game/>\n          </div>\n    );\n}\n\nconst AppWithProvider = () => (\n  <ConnectionProvider endpoint=\" https://api.devnet.solana.com\">\n    <WalletProvider wallets={wallets} autoConnect>\n      <WalletModalProvider>\n        <App />\n      </WalletModalProvider>\n    </WalletProvider>\n  </ConnectionProvider>\n)\n\n\nexport default AppWithProvider;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}